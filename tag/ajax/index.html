<!DOCTYPE html><html lang="en"><head><title>ajax - selfcontained</title><meta name="keywords" content="software,web development,brad harris"><meta name="author" content="Brad Harris"><meta name="robots" content="index,follow"><meta name="viewport" content="width=device-width,initial-scale=0.5"><link href="/css/blog.css" rel="stylesheet"><link rel="alternate" type="application/rss+xml" title="selfcontained Â» rss" href="http://www.selfcontained.us/feed/rss.xml"></head><body><div id="main"><header><h1><a href="/">selfcontained</a><small>[web development]</small></h1></header><div id="content-container"><aside class="sidebar"><div class="about"><img src="/images/bradharris.gif" width="100" height="100" align="left"><p>	My name is Brad Harris and I'm an engineer @ Yahoo!
	I love architecting software and developing simple and elegant solutions to complex problems. I
	've worked for companies on large enterprise projects, as well as smaller projects, and find satisfaction across the board.
	I enjoy learning and applying new principles and patterns to my work.
</p></div><div class="recent-articles"><h3>recent articles</h3><ul><li><a href="/2014/01/14/modern-componentized-ui">talk on modern componentized ui</a><div class="date">Tuesday January 14, 2014</div></li><li><a href="/2013/09/14/flipflop-0.1.0-configurable-urls">flipflop 0.1.0 - configurable urls</a><div class="date">Saturday September 14, 2013</div></li><li><a href="/2012/09/20/using-express-with-broadway">using express with broadway</a><div class="date">Thursday September 20, 2012</div></li><li><a href="/2012/09/18/decoupling-your-node-js-application-with-broadway">decoupling your node.js application with broadway</a><div class="date">Tuesday September 18, 2012</div></li><li><a href="/2012/09/01/hello-fabric">hello fabric</a><div class="date">Saturday September 1, 2012</div></li><li><a href="/2012/05/08/node-js-circular-dependencies">node.js and circular dependencies</a><div class="date">Tuesday May 8, 2012</div></li><li><a href="/2012/04/27/backup-iphoto-with-google-drive">google.drive.backup(iphoto.library)</a><div class="date">Friday April 27, 2012</div></li><li><a href="/2012/04/14/makdown-powered-blogs">markdown powered blogs</a><div class="date">Saturday April 14, 2012</div></li><li><a href="/2012/04/04/node-js-clusters">node.js clusters</a><div class="date">Wednesday April 4, 2012</div></li><li><a href="/2011/07/08/markdown-me">markdown.me</a><div class="date">Friday July 8, 2011</div></li><li><a href="/2011/05/28/phpunit-mocks-and-closures">PHPUnit, Mocks and Closures</a><div class="date">Saturday May 28, 2011</div></li><li><a href="/2011/04/20/php-and-an-abstract-singleton">PHP and an abstract Singleton</a><div class="date">Wednesday April 20, 2011</div></li><li><a href="/2011/04/20/review-yahoo-user-interface-library-2-x-cookbook">Review: Yahoo! User Interface Library 2.x Cookbook</a><div class="date">Wednesday April 20, 2011</div></li><li><a href="/2011/02/28/awaiting-yahoo-user-interface-library-2-x-cookbook">Awaiting Yahoo! User Interface Library 2.x Cookbook</a><div class="date">Monday February 28, 2011</div></li><li><a href="/2011/01/23/latest-endeavor-whoopdwhoop-com">Latest Endeavor: whoopdwhoop.com</a><div class="date">Sunday January 23, 2011</div></li><li><a href="/2010/11/30/php-coalesce">?: PHP Coalesce</a><div class="date">Tuesday November 30, 2010</div></li><li><a href="/2010/11/19/yui-jquery">YUI =&gt; jQuery?</a><div class="date">Friday November 19, 2010</div></li><li><a href="/2010/10/22/yahoo-new-adventure">Yahoo!  A New Adventure</a><div class="date">Friday October 22, 2010</div></li><li><a href="/2010/09/04/yui-2-8-learning-the-library-book-review">YUI 2.8 Learning the Library book review</a><div class="date">Saturday September 4, 2010</div></li><li><a href="/2010/08/13/yui-2-8-learning-the-library-free-chapter">&quot;YUI 2.8: Learning the Library&quot; Free Chapter</a><div class="date">Friday August 13, 2010</div></li><li><a href="/2010/05/08/first-iphone-app-lds-gems">First iPhone App - LDS Gems</a><div class="date">Saturday May 8, 2010</div></li><li><a href="/2010/03/30/doctrine-model-hydration">Doctrine Model Hydration</a><div class="date">Tuesday March 30, 2010</div></li><li><a href="/2009/09/16/getting-keycode-values-in-javascript">Getting keycode values in Javascript</a><div class="date">Wednesday September 16, 2009</div></li><li><a href="/2009/01/23/scoping-javascript-closures-in-loops">Scoping Javascript closures in loops</a><div class="date">Friday January 23, 2009</div></li><li><a href="/2009/01/23/browser-autocomplete-and-keyup-events">Browser autocomplete and keyup events</a><div class="date">Friday January 23, 2009</div></li></ul></div><div class="links"><h3>links</h3><ul><li><a href="/archive">archive</a></li><li><a href="/feed/rss.xml">feed</a></li></ul></div><div class="YAD-7eb3e811-64f1-37bf-bb50-7a9b67a70521"><script>(function(a,b,c,d,e,f){a[d]||(a[d]=
 function(){(a[d].q=a[d].q||[]).push([arguments,+new Date])});
 e=b.createElement(c);f=b.getElementsByTagName(c)[0];
 e.src='https://s.yimg.com/uq/syndication/yad.js';e.async=true;
 f.parentNode.insertBefore(e,f)}(window,document,'script','yad'));
 yad('7eb3e811-64f1-37bf-bb50-7a9b67a70521');

</script></div></aside><section id="content"><h2>Articles tagged with <i>"ajax"</i> (4)</h2><article><h2><a href="/2008/08/29/teaching-an-old-framework-new-tricks">Teaching an old Framework new tricks!</a></h2><div class="meta"><ul class="tags"><li><a href="/tag/ajax">ajax</a></li><li><a href="/tag/java">java</a></li><li><a href="/tag/javascript">javascript</a></li><li><a href="/tag/struts">struts</a></li></ul><img src="http://www.gravatar.com/avatar/c20763ec853bb1d2eb3e8a08cc5a28b9?s=30.jpg" width="30" height="30"><div class="date">Friday August 29, 2008</div><div class="name">By Brad Harris</div></div><div class="content"><p>In summary, I want to discuss an alternative approach for developing a rich, dynamic UI using Struts1.  The basic approach is:

</p>
<ul>
<li>Java Object to JSON string</li>
<li>JSON String consumed by Javascript</li>
<li>Manipulate UI, update Javascript model</li>
<li>On submit of form serialize Javascript model to JSON string</li>
<li>Set value of hidden input to JSON string</li>
<li>JSON string to Java Object on server side</li>
</ul>
<p>Modern web development frameworks have come a long way, in almost every language.  Many of the current popular frameworks have integrated widgets or processes for building rich ajax powered UI&#39;s with little hand-rolled code.  This makes developing those applications faster and easier.  Unfortunately, we can&#39;t always use the latest and greatest new frameworks as developers.

</p>
<p>While working on a J2EE web application that was started over 5 years ago, I&#39;ve learned a lot about how frameworks have evolved since then.  When this project was started, Struts 1 was very popular, and a proven framework, so was naturally adopted for the front end.  Over time, many things were built to integrate with Struts 1 and provide custom functionality that was required.  This makes it very difficult, and highly improbable that a new front end framework can be swapped in due to the time and money that would have to be invested.  At some point that may be a necessity, but until then, you have to work with what you have.

</p>
<p>Building a rich UI using ajax in Struts 1 is ... interesting.  Sruts1 is very form centric, and all of your form inputs in your UI map directly back to some field on your Java form object in one way or another.  This makes it tricky to provide a flexible data structure for a rich UI that may be adding or removing elements.  Try adding/removing elements to your page dynamically, and having them map back to your Struts1 Form in a clean way and you&#39;ll see what I&#39;m talking about.  A recent approach I took to tackling this situation was to depend very little on the framework.

</p>
<p>Lets say I have a Java object graph I want to load into some front end javascript model to work with in the UI.  I can fetch this asynchronously as the page loads as a JSON payload, or just dump it to the page into the appropriate place so my javascript consumes it.  Either way, I need to make sure its painless to convert this data structure to a JSON string, or create it from a JSON string.  This will make passing it back and forth from the server side to the client side much easier.

</p>
<p>I can then use this as my front end data model to display, change, remove and add data.  When I&#39;m ready to commit my changes, I then have to get that back to my server side Java action.  Obviously I could also make the persistence portion asynchronous as well, but sometimes thats problematic, as you may have a lot that goes on in the backend and the rendering of a new page (security, alerts, etc.) that you would have to replicate if you were to do this asynchronously.  To keep everything working as normal, one approach is to take your javascript data graph, and serialize it into a json string and set it into an html hidden input.  This input can be mapped back to your Struts form, so back in your action you have a json string you decode and create the appropriate Java objects from.  I&#39;ve found this to be a very useful approach when trying to build a very rich UI on top of an older framework.  In summary, here are the steps followed:

</p>
<ul>
<li>Build your data as Java objects that can be serialized into JSON, and created from a JSON string.</li>
<li>Consume the JSON data into your javascript and work with it as needed in the front end.</li>
<li>On submit of the form, serialize the Javascript object into a JSON string and set it onto the value of a hidden input</li>
<li>Get the value of the hidden input on the server side as your framework supports, and convert the JSON string back to your Java objects</li>
</ul>

</div></article><article><h2><a href="/2007/11/06/new-project-live-and-new-server">New project live, and new server</a></h2><div class="meta"><ul class="tags"><li><a href="/tag/adroit">adroit</a></li><li><a href="/tag/ajax">ajax</a></li></ul><img src="http://www.gravatar.com/avatar/c20763ec853bb1d2eb3e8a08cc5a28b9?s=30.jpg" width="30" height="30"><div class="date">Tuesday November 6, 2007</div><div class="name">By Brad Harris</div></div><div class="content"><p>After a lot of work on my part, and on the owners, a project I&#39;ve been working on for awhile went live.  <a href="http://www.pujbaby.com">Pujbaby.com</a> went live this weekend.  Congratulations to them, and I&#39;m glad to have this project go live.  We have more work to do, but they now have their online store in production.

</p>
<p><a href="http://www.pujbaby.com"><img src="/images/puj.jpg" alt="pujbaby.com"></a>

</p>
<p>Part of getting <a href="http://www.pujbaby.com">pujbaby.com</a> live was acquiring a new server from <a href="http://www.mediatemple.net">MediaTemple</a>.  We went with their Dedicated Virtual Server, and so far I&#39;ve really been impressed with it.  I haven&#39;t moved all my sites over to it yet, but its been performing much better than the Grid Server account we&#39;ve been using (which performs quite well considered the cost and features provided).  If you&#39;re looking to upgrade your hosting environment, but keep the costs relatively low, then definitely check it out (no i&#39;m not getting any referral bonuses :) ).

</p>

</div></article><article><h2><a href="/2007/10/07/ajax-requests-when-users-stop-typing">Ajax requests when users stop typing</a></h2><div class="meta"><ul class="tags"><li><a href="/tag/ajax">ajax</a></li><li><a href="/tag/javascript">javascript</a></li></ul><img src="http://www.gravatar.com/avatar/c20763ec853bb1d2eb3e8a08cc5a28b9?s=30.jpg" width="30" height="30"><div class="date">Sunday October 7, 2007</div><div class="name">By Brad Harris</div></div><div class="content"><p>I was tackling a problem the other day related to triggering ajax requests as a user was typing in an input field.  Sometimes you can just fire off the request on the blur event, but other times you want to fire it off from a keypress event.  Sending xhr requests on every keypress can quickly overload your server and/or database.  More often than not, if a user is typing, you can wait until they are done, or for a pause in their button mashing to send the request.  This saves your server from getting hammered by un-needed requests, but still gives the user the experience desired.

</p>
<p>A simple approach to this is wrapping your method that handles the particular ajax request with another simple method that records the time when they key was pressed, and queues up the ajax request method using <strong>setTimeout</strong>.  Here&#39;s an example below:

</p>
<pre><code class="lang-javascript">Example = {

   interval : <span class="number">1000</span>,

   lastKeypress : <span class="keyword">null</span>,

   interceptKeypress : <span class="keyword">function</span>() {
      <span class="keyword">this</span>.lastKeypress = <span class="keyword">new</span> Date().getTime();
      <span class="keyword">var</span> that = <span class="keyword">this</span>;
      setTimeout(<span class="keyword">function</span>() {
         <span class="keyword">var</span> currentTime = <span class="keyword">new</span> Date().getTime();
         <span class="keyword">if</span>(currentTime - that.lastKeypress > that.interval) {
            that.sendRequest();
         }
      }, that.interval + <span class="number">100</span>);
   },

   sendRequest : <span class="keyword">function</span>() {
      <span class="comment">//Perform xhr request</span>
   }

}</code></pre>
<p>The <code>Example.interceptKeypress()</code> method now becomes what you tie the keyup event of your text input to instead of going straight to the <code>Example.sendRequest()</code> method.  The current time is recorded, and then <code>Example.sendRequest()</code> is queued up using <code>setTimeout()</code> and a closure to handle scoping and ensure that enough time has passed since the last keyup event (100 ms is added to the current time as a buffer).

</p>
<p>This approach can easily be added onto existing event handlers if you find you&#39;re sending too many requests in particular situations, or for any type of event handling where you want to limit when/how often it is fired.  Hope this benefits some people!
</p>

</div></article><article><h2><a href="/2007/03/02/sayitonthewallcom">SayItOnTheWall.com</a></h2><div class="meta"><ul class="tags"><li><a href="/tag/ajax">ajax</a></li><li><a href="/tag/dojo">dojo</a></li><li><a href="/tag/projects">projects</a></li></ul><img src="http://www.gravatar.com/avatar/c20763ec853bb1d2eb3e8a08cc5a28b9?s=30.jpg" width="30" height="30"><div class="date">Friday March 2, 2007</div><div class="name">By Brad Harris</div></div><div class="content"><p>Today I finished up the work needed for <a href="http://sayitonthewall.com">SayItOnTheWall.com</a> to go live.  I had a lot of fun working on this site as I got to use dojo for the first time in a full project, and really enjoyed it.  The site was created for a business my wife has started up to create and sell Vinyl wall words as home decorations.  From a technical point of view, it utilizes an Ajax shopping cart that I created, along with a <a href="http://www.sayitonthewall.com/products/custom/">&quot;build-your-own&quot; saying component</a> that lets customers pick and choose from a large collection of fonts, colors and sizes, and see what they&#39;re saying will look like on the spot.

</p>
<p><img src="/images/sayitonthewall.gif" alt="SayItOnTheWall.com">

</p>

</div></article></section></div><footer>	&copy; 2012 Brad Harris |
	powered by
<a href="https://github.com/selfcontained/flipflop">flipflop</a></footer></div><script type="text/javascript">var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-254292-12']);
_gaq.push(['_trackPageview']);

(function() {
 var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
 ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
 var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();

</script><div class="YAD-9a9f8d42-22f8-31d6-b8c4-54958e4eeba4"></div><script>(function(a,b,c,d,e,f){a[d]||(a[d]=
 function(){(a[d].q=a[d].q||[]).push([arguments,+new Date])});
 e=b.createElement(c);f=b.getElementsByTagName(c)[0];
 e.src='https://s.yimg.com/uq/syndication/yad.js';e.async=true;
 f.parentNode.insertBefore(e,f)}(window,document,'script','yad'));
 yad('9a9f8d42-22f8-31d6-b8c4-54958e4eeba4');

</script></body></html>