<!DOCTYPE html><html lang="en"><head><title>yui - selfcontained</title><meta name="keywords" content="software,web development,brad harris"><meta name="author" content="Brad Harris"><meta name="robots" content="index,follow"><meta name="viewport" content="width=device-width,initial-scale=0.5"><link href="/css/blog.css" rel="stylesheet"><link rel="alternate" type="application/rss+xml" title="selfcontained Â» rss" href="http://www.selfcontained.us/feed/rss.xml"></head><body><div id="main"><header><h1><a href="/">selfcontained</a><small>[web development]</small></h1></header><div id="content-container"><aside class="sidebar"><div class="about"><img src="/images/bradharris.gif" width="100" height="100" align="left"><p>	My name is Brad Harris and I'm an engineer @ Yahoo!
	I love architecting software and developing simple and elegant solutions to complex problems. I
	've worked for companies on large enterprise projects, as well as smaller projects, and fine satisfaction across the board.
	I enjoy learning and applying new principles and patterns to my work.
</p></div><div class="recent-articles"><h3>recent articles</h3><ul><li><a href="/2014/01/14/modern-componentized-ui">talk on modern componentized ui</a><div class="date">Tuesday January 14, 2014</div></li><li><a href="/2013/09/14/flipflop-0.1.0-configurable-urls">flipflop 0.1.0 - configurable urls</a><div class="date">Saturday September 14, 2013</div></li><li><a href="/2012/09/20/using-express-with-broadway">using express with broadway</a><div class="date">Thursday September 20, 2012</div></li><li><a href="/2012/09/18/decoupling-your-node-js-application-with-broadway">decoupling your node.js application with broadway</a><div class="date">Tuesday September 18, 2012</div></li><li><a href="/2012/09/01/hello-fabric">hello fabric</a><div class="date">Saturday September 1, 2012</div></li><li><a href="/2012/05/08/node-js-circular-dependencies">node.js and circular dependencies</a><div class="date">Tuesday May 8, 2012</div></li><li><a href="/2012/04/27/backup-iphoto-with-google-drive">google.drive.backup(iphoto.library)</a><div class="date">Friday April 27, 2012</div></li><li><a href="/2012/04/14/makdown-powered-blogs">markdown powered blogs</a><div class="date">Saturday April 14, 2012</div></li><li><a href="/2012/04/04/node-js-clusters">node.js clusters</a><div class="date">Wednesday April 4, 2012</div></li><li><a href="/2011/07/08/markdown-me">markdown.me</a><div class="date">Friday July 8, 2011</div></li><li><a href="/2011/05/28/phpunit-mocks-and-closures">PHPUnit, Mocks and Closures</a><div class="date">Saturday May 28, 2011</div></li><li><a href="/2011/04/20/php-and-an-abstract-singleton">PHP and an abstract Singleton</a><div class="date">Wednesday April 20, 2011</div></li><li><a href="/2011/04/20/review-yahoo-user-interface-library-2-x-cookbook">Review: Yahoo! User Interface Library 2.x Cookbook</a><div class="date">Wednesday April 20, 2011</div></li><li><a href="/2011/02/28/awaiting-yahoo-user-interface-library-2-x-cookbook">Awaiting Yahoo! User Interface Library 2.x Cookbook</a><div class="date">Monday February 28, 2011</div></li><li><a href="/2011/01/23/latest-endeavor-whoopdwhoop-com">Latest Endeavor: whoopdwhoop.com</a><div class="date">Sunday January 23, 2011</div></li><li><a href="/2010/11/30/php-coalesce">?: PHP Coalesce</a><div class="date">Tuesday November 30, 2010</div></li><li><a href="/2010/11/19/yui-jquery">YUI =&gt; jQuery?</a><div class="date">Friday November 19, 2010</div></li><li><a href="/2010/10/22/yahoo-new-adventure">Yahoo!  A New Adventure</a><div class="date">Friday October 22, 2010</div></li><li><a href="/2010/09/04/yui-2-8-learning-the-library-book-review">YUI 2.8 Learning the Library book review</a><div class="date">Saturday September 4, 2010</div></li><li><a href="/2010/08/13/yui-2-8-learning-the-library-free-chapter">&quot;YUI 2.8: Learning the Library&quot; Free Chapter</a><div class="date">Friday August 13, 2010</div></li><li><a href="/2010/05/08/first-iphone-app-lds-gems">First iPhone App - LDS Gems</a><div class="date">Saturday May 8, 2010</div></li><li><a href="/2010/03/30/doctrine-model-hydration">Doctrine Model Hydration</a><div class="date">Tuesday March 30, 2010</div></li><li><a href="/2009/09/16/getting-keycode-values-in-javascript">Getting keycode values in Javascript</a><div class="date">Wednesday September 16, 2009</div></li><li><a href="/2009/01/23/scoping-javascript-closures-in-loops">Scoping Javascript closures in loops</a><div class="date">Friday January 23, 2009</div></li><li><a href="/2009/01/23/browser-autocomplete-and-keyup-events">Browser autocomplete and keyup events</a><div class="date">Friday January 23, 2009</div></li></ul></div><div class="links"><h3>links</h3><ul><li><a href="/archive">archive</a></li><li><a href="/feed/rss.xml">feed</a></li></ul></div></aside><section id="content"><h2>Articles tagged with <i>"yui"</i> (12)</h2><article><h2><a href="/2011/04/20/review-yahoo-user-interface-library-2-x-cookbook">Review: Yahoo! User Interface Library 2.x Cookbook</a></h2><div class="meta"><ul class="tags"><li><a href="/tag/book review">book review</a></li><li><a href="/tag/javascript">javascript</a></li><li><a href="/tag/yui">yui</a></li></ul><img src="http://www.gravatar.com/avatar/c20763ec853bb1d2eb3e8a08cc5a28b9?s=30.jpg" width="30" height="30"><div class="date">Wednesday April 20, 2011</div><div class="name">By Brad Harris</div></div><div class="content"><p>I&#39;ve had some time to really dig in to Matt Snider&#39;s latest book, Yahoo! User Interface Library 2.x Cookbook, and have some great things to say about it.  I wanted to take a different approach to reading and reviewing this book, and hopefully it proves helpful to readers.  I&#39;ve been working on <a href="whoopdwhoop.com">whoopdwhoop.com</a> in my free time a lot lately, and normally as I&#39;m developing front-end code using YUI, I reference their online documentation (which is pretty good IMO) when I have questions.  I decided to just rely on this book for the past few weeks to really see how useful it was as a reference while developing.  In short, it has been a great development companion.  Let me explain...

</p>
<p>I was working on adding some DataTable functionality for a client&#39;s site (<a href="https://aerissecure.com/">Aeris Secure</a>), and found the chapter in Matt&#39;s book to provide great examples and explanations for getting it going relatively quickly.  He lays out multiple use cases for the DataTable, as he does so with just about all of the chapters, and that wide coverage provided a great reference as I found each example had additional insight into how to use the particular component of the YUI library.  I think this approach will be a great way for beginners to ramp up to using the library, as they start fairly vanilla and basic, but as you progress the more advanced use cases and features are discussed.  For a developer that is more familiar with the basics, they will quickly learn to jump a few sections in to each chapter to get to the meat of what they want to learn.

</p>
<p>That&#39;s one example of how I found the book to be helpful in practice.  If you want a solid picture of how to work with YUI, this book is great.

</p>

</div></article><article><h2><a href="/2011/02/28/awaiting-yahoo-user-interface-library-2-x-cookbook">Awaiting Yahoo! User Interface Library 2.x Cookbook</a></h2><div class="meta"><ul class="tags"><li><a href="/tag/javascript">javascript</a></li><li><a href="/tag/yui">yui</a></li></ul><img src="http://www.gravatar.com/avatar/c20763ec853bb1d2eb3e8a08cc5a28b9?s=30.jpg" width="30" height="30"><div class="date">Monday February 28, 2011</div><div class="name">By Brad Harris</div></div><div class="content"><p><img src="/images/yui-lib-2.x-cookboox.jpg" alt="book cover">

</p>
<p>It&#39;s been out for awhile now, but I&#39;ve got a copy of &quot;<a href="https://www.packtpub.com/yahoo-user-interface-library-2-x-cookbook/book">Yahoo! User Interface Library 2.x Cookbook</a>&quot; by <a href="http://mattsnider.com/">Matt Snider</a> on it&#39;s way. I&#39;m excited to give it a read, Matt definitely knows the YUI Library from his work on <a href="http://www.mint.com/">Mint</a>.

</p>

</div></article><article><h2><a href="/2011/01/23/latest-endeavor-whoopdwhoop-com">Latest Endeavor: whoopdwhoop.com</a></h2><div class="meta"><ul class="tags"><li><a href="/tag/doctrine">doctrine</a></li><li><a href="/tag/javascript">javascript</a></li><li><a href="/tag/minify">minify</a></li><li><a href="/tag/php">php</a></li><li><a href="/tag/yui">yui</a></li><li><a href="/tag/zend">zend</a></li></ul><img src="http://www.gravatar.com/avatar/c20763ec853bb1d2eb3e8a08cc5a28b9?s=30.jpg" width="30" height="30"><div class="date">Sunday January 23, 2011</div><div class="name">By Brad Harris</div></div><div class="content"><p><a href="http://whoopdwhoop.com"><img src="/images/whoopdwhoop.png" alt=""></a>

</p>
<p>My wife and I have been chugging away on a new endeavor for awhile, and we finally got to a point where we could launch it live.  In short, it&#39;s a currency free, creative marketplace, and it&#39;s called <a href="http://whoopdwhoop.com">whoopdwhoop.com</a>.  It gives &quot;artisans&quot;, or crafty people, a place to list their creations, and hopefully, a community where they can swap their creations with others all without exchanging any currency.  This is facilitated through a pretty simple &quot;whoop&quot; (read point) based system.  As people request a creation from someone, they pay them in &quot;whoops&quot;, and then that person can use those &quot;whoops&quot; to request other creations.  We haven&#39;t pushed much of a marketing campaign at it yet, in hopes to gauge initial feedback before doing so, and fix or improve whatever came up.  We&#39;ve done a fair amount of that so far, and are pretty happy with it&#39;s current state.  Needless to say, we can&#39;t speak to if it will catch on and be the start of a thriving community, we&#39;ll have to wait and see.

</p>
<p>While I don&#39;t think the majority of my blog&#39;s reader-base would be interested in using the site itself, I wanted to make a quick post to point out how the development of it has gone, which will hopefully be of more interest to those reading.

</p>
<p>I built the site in about 4 or 5 months of actual heads-down, after-hours work.  I have a day job, so this is just something I&#39;ve spent nights and weekends putting time into.  It&#39;s built on <a href="http://zendframework.com/">Zend Framework</a> MVC, which I absolutely love.  The UI is enhanced through YUI, which is another favorite library of mine.  The database is MySQL, and I&#39;m also using <a href="http://www.doctrine-project.org/">Doctrine ORM</a>.

</p>
<p>Zend Framework and Doctrine, in my mind, are a great marriage of libraries for PHP.  Zend handles everything I&#39;ve needed from an MVC, with the additional benefits of providing out-of-the-box API&#39;s for things like ACL, Auth, Caching, Emails and Logging.  Doctrine does a great job at providing a stable and solid ORM, and a great means of managing updates through a simple migration strategy.  The best part about finding a solid framework you enjoy working with, is you eventually end up with a great set of features you&#39;ve built that can be dropped in to any project, giving you quite the head-start.  When I started ( which was actually over a year ago, my motivation comes in spurts), Doctrine 2 was in development, but wasn&#39;t where it is now.  I like the concept they&#39;ve taken with the new version, but currently I&#39;m using their 1.x version.

</p>
<p>YUI is being used pretty sparingly right now.  I think the only modules being used currently are containers for the dialogs, buttons, and menu.  I need to give a shout out to the <a href="http://code.google.com/p/minify/">Minify</a> library as well, which is handling the JS/CSS minification quite nicely.

</p>
<p>I have some follow-up posts I plan on writing to go into more detail on some of the items and techniques I used in regards to things like Caching, but until I&#39;ve had more of a chance to put the site through a ringer, I&#39;ll hold off.  Anyways, if you&#39;re building a new site, looking for frameworks, I highly recommend everything I mentioned above.

</p>

</div></article><article><h2><a href="/2010/11/19/yui-jquery">YUI =&gt; jQuery?</a></h2><div class="meta"><ul class="tags"><li><a href="/tag/javascript">javascript</a></li><li><a href="/tag/jquery">jquery</a></li><li><a href="/tag/yui">yui</a></li></ul><img src="http://www.gravatar.com/avatar/c20763ec853bb1d2eb3e8a08cc5a28b9?s=30.jpg" width="30" height="30"><div class="date">Friday November 19, 2010</div><div class="name">By Brad Harris</div></div><div class="content"><p>Recently a question was posted on Quora, &quot;<a href="http://www.quora.com/How-could-YUI3-improve-its-image-compared-to-jQuery-MooTools-etc/">How could YUI3 improve its image compared to jQuery, MooTools, etc.?</a>&quot;.  John Resig, of jQuery fame, gave a great answer on his thoughts to the question.  <a href="http://www.nczonline.net/blog/2010/11/03/response-to-john-resigs-comments-about-yui/">Nicholas Zakas responds</a> with another great explanation of why he doesn&#39;t think the comparison is needed.  I disagree with Zakas in regards to <a href="http://alexsexton.com/blog/2010/08/on-rolling-your-own-large-jquery-apps/">jQuery not being sufficient for &quot;scalable web applications&quot;</a>.  Both have great points, and are worth a read if you&#39;re actively involved with frontend engineering.

</p>

</div></article><article><h2><a href="/2010/09/04/yui-2-8-learning-the-library-book-review">YUI 2.8 Learning the Library book review</a></h2><div class="meta"><ul class="tags"><li><a href="/tag/book review">book review</a></li><li><a href="/tag/javascript">javascript</a></li><li><a href="/tag/yui">yui</a></li></ul><img src="http://www.gravatar.com/avatar/c20763ec853bb1d2eb3e8a08cc5a28b9?s=30.jpg" width="30" height="30"><div class="date">Saturday September 4, 2010</div><div class="name">By Brad Harris</div></div><div class="content"><p>I&#39;ve had a chance to read through the latest book on YUI, titled <a href="https://www.packtpub.com/yahoo-user-interface-yui-2-8-learning-library/book">YUI 2.8 Learning the Library</a>.  The book was written by Daniel Barreiro and Dan Wellman, and was published by Packt Publishing.  For the impatient that don&#39;t want to read the whole review, and want to get right to the goods, here they are.  The book has great coverage of the YUI library, including all of the popular widget like Calendar, Container, Autocomplete, DataSource, DataTable and more.  If you&#39;ren new to YUI and looking for an overage and how-to for the library, this book would serve you well.  If you&#39;re an experienced YUI developer, you probably won&#39;t get a whole lot out of this book that you don&#39;t already know, or couldn&#39;t gain through reading <a href="http://developer.yahoo.com/yui/2/">YUI&#39;s online examples and API</a>.

</p>
<p>If you read through this book in it&#39;s entirety, you&#39;ll come to understand the main reason I love YUI, that it&#39;s not just a collection of widgets and utilities.  This book explains the full feature set of the YUI library, and you&#39;ll realize that it&#39;s the perfect foundation to build on top of.  The author&#39;s do a really great job of showing in depth examples that teach you how the components work.  I particularly liked reading the chapter on DataSource and DataTable.

</p>
<p>If the online examples provided by Yahoo! leave you wondering how things are working, this book fills in those gaps.  Most of the book is targeted to beginners and intermediate developers.

</p>

</div></article><article><h2><a href="/2010/08/13/yui-2-8-learning-the-library-free-chapter">&quot;YUI 2.8: Learning the Library&quot; Free Chapter</a></h2><div class="meta"><ul class="tags"><li><a href="/tag/javascript">javascript</a></li><li><a href="/tag/yui">yui</a></li></ul><img src="http://www.gravatar.com/avatar/c20763ec853bb1d2eb3e8a08cc5a28b9?s=30.jpg" width="30" height="30"><div class="date">Friday August 13, 2010</div><div class="name">By Brad Harris</div></div><div class="content"><p><a href="https://www.packtpub.com/sites/default/files/0707-chapter-7-menus.pdf">Grab a free chapter</a> of the latest <a href="http://developer.yahoo.com/yui/">YUI</a> book from Packt Publishing, &quot;<strong>YUI 2.8: Learning the Library</strong>.&quot;  The free chapter covers something we all use a lot, menus.  I&#39;m checking it out now, and suggest if you use, or are thinking about using YUI, you do the same since it&#39;s free.

</p>
<p>I&#39;ve been using YUI for about 4 years now, and love it.  I love the solid foundation it provides for me to build my own interfaces on top of.  I love the polished UI elements it provides as well.  I&#39;m looking forward to reading this book in its entirety.  Check back soon for a full review of it.

</p>

</div></article><article><h2><a href="/2009/01/23/scoping-javascript-closures-in-loops">Scoping Javascript closures in loops</a></h2><div class="meta"><ul class="tags"><li><a href="/tag/events">events</a></li><li><a href="/tag/javascript">javascript</a></li><li><a href="/tag/yui">yui</a></li></ul><img src="http://www.gravatar.com/avatar/c20763ec853bb1d2eb3e8a08cc5a28b9?s=30.jpg" width="30" height="30"><div class="date">Friday January 23, 2009</div><div class="name">By Brad Harris</div></div><div class="content"><p>It must have been something I ate, cause this is like the third post in 2 days I think!  This is a quick one, but super handy to know if you don&#39;t already.  There is  semi-common problem I run into, and it has to do with scoping of closures inside of loops.  Lets get straight to the code so its easier to understand what I&#39;m talking about:

</p>
<pre><code class="lang-html">&lt;html>
&lt;script type=<span class="string">"text/javascript"</span> src=<span class="string">"http://yui.yahooapis.com/2.6.0/build/utilities/utilities.js"</span> >&lt;/script>
&lt;script type=<span class="string">"text/javascript"</span>>
    <span class="keyword">var</span> values = [<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>];
    <span class="keyword">for</span>(<span class="keyword">var</span> idx in values) {
        <span class="comment">//First Test - will have incorrent scoping</span>
        YAHOO.util.Event.addListener(window, <span class="string">'load'</span>, <span class="keyword">function</span>() {
            YAHOO.util.Dom.get(<span class="string">'wrong-scope'</span>).innerHTML += <span class="string">' '</span>+values[idx]+<span class="string">' '</span>;
        });
        <span class="comment">//Second Test - scoping will be correct</span>
        YAHOO.util.Event.addListener(window, <span class="string">'load'</span>, <span class="keyword">function</span>(scopedValue) {
            <span class="keyword">return</span> <span class="keyword">function</span>() {
                YAHOO.util.Dom.get(<span class="string">'right-scope'</span>).innerHTML += <span class="string">' '</span>+scopedValue+<span class="string">' '</span>;
            }
        }(values[idx]));

    }
&lt;/script>

&lt;body>
&lt;div id=<span class="string">"wrong-scope"</span>>
&lt;h1>Wrong Scope&lt;/h1>
&lt;/div>
&lt;div id=<span class="string">"right-scope"</span>>
&lt;h1>Right Scope&lt;/h1>
&lt;/div>

&lt;/body>
&lt;/html></code></pre>
<p>In this example, there is a simple array of ordered values, and then a loop over those values.  For each iteration of the loop, there is an onload listener added that will dump that value into a div.  You&#39;ll see the first loop always dumps 9, because the scoping is wrong when the closure executes, and the last time through the loop sets the scope of <code>values[idx]</code>.

</p>
<p>The second section does some unique handy-work to correct the scoping.  A listener is added like before, but the closure is created in a specific fashion in order to get the scope to be the way we want at runtime.  For the closure in the second section, we create a self-executing function, passing in a parameter that is the current value in our array of numbers.  That function runs, and returns another function that does the appending to the div of the value.  This second, <em>inner-function</em> is what will execute on page load.  Because of the outer-function we immediately called, the variable passed into it, the current value from our array, will be available, and properly scoped for our inner-function.

</p>
<p><img src="http://www.selfcontained.us/wp-content/uploads/2009/01/scoping.gif" alt="scoping">

</p>
<p>This is a handy trick when you have a situation where you are looping over a collection, and are providing some type of callback/closure for each entry, but need some proper scoping.

</p>

</div></article><article><h2><a href="/2009/01/22/followup-on-yui-getfirstdescendantby">Followup on YUI : getFirstDescendantBy()</a></h2><div class="meta"><ul class="tags"><li><a href="/tag/javascript">javascript</a></li><li><a href="/tag/yui">yui</a></li></ul><img src="http://www.gravatar.com/avatar/c20763ec853bb1d2eb3e8a08cc5a28b9?s=30.jpg" width="30" height="30"><div class="date">Thursday January 22, 2009</div><div class="name">By Brad Harris</div></div><div class="content"><p>Awhile ago <a href="http://www.selfcontained.us/2008/08/20/javascript-getfirstdescendantby/">I posted on an additional function for YAHOO.util.Dom called <strong>getFirstDescendantBy()</strong></a>.  I was following <a href="http://sourceforge.net/tracker/?func=detail&amp;atid=836479&amp;aid=2068369&amp;group_id=165715">the ticket submitted to the YUI Sourceforge tracker</a>, and saw that it had been closed out, and that a new function called <code>YAHOO.util.Dom.getElementBy()</code> was added to fill this request.  I decided to check out <a href="https://github.com/yui/yui2">the newly available YUI source code on github</a>, and noticed some nice enhancements.  <code>YAHOO.util.Dom.getElementBy(method, tag, root)</code> is now available (not in the latest stable release yet though), and does what <code>getFirstDescendantBy</code> did, and in most cases its much faster.  Great job to the YUI team!

</p>
<p>Instead of taking a recursive approach to walking the graph like I had, YUI is just grabbing all the children by tag name, even if you don&#39;t supply a tag name (in this case it will use &#39;<em>&#39;).  This turns out to be much faster than the recursive approach for most cases.  If you happen to be looking for an element in a very large dom tree structure, and that object is located early on in the tree, the new YUI approach will be slower than the recursive approach.  Fortunately, when I say <em>*&quot;large&quot;</em></em> dom tree, I&#39;m talking about a tree about 8 nodes deep, iterated 500-1000 times.  Most of us don&#39;t work with sites displaying that much html on a single page, so its definitely not a concern in my book.

</p>
<p>Digging in further, I noticed that the new <code>getElementBy</code> just delegates to <code>YAHOO.util.Dom.getElementsBy()</code>, which has now been improved to accept a number of additional parameters than what 2.6.0 has available.  One of those is a boolean, <code>firstOnly</code>, which will stop after it finds the first match, and return it.  It looks like there are also additional parameters for passing in an object to your apply method, and making that object the scope.

</p>
<p>I&#39;m excited about this change, and it means I will soon be able to use the native YUI function for what I needed.  I&#39;d suggest that anyone else that was using something such as <code>getFirstDescendantBy()</code> that I had shared look at switching once YUI releases the new function.  Thanks again YUI.

</p>

</div></article><article><h2><a href="/2008/12/23/javascript-widget-approaches-singleton-vs-prototype">Javascript widget approaches: Singleton vs Prototype</a></h2><div class="meta"><ul class="tags"><li><a href="/tag/javascript">javascript</a></li><li><a href="/tag/yui">yui</a></li></ul><img src="http://www.gravatar.com/avatar/c20763ec853bb1d2eb3e8a08cc5a28b9?s=30.jpg" width="30" height="30"><div class="date">Tuesday December 23, 2008</div><div class="name">By Brad Harris</div></div><div class="content"><p>Recently I&#39;ve been doing some work setting up some standard javascript widgets for a web application I am working on.  By widget, I&#39;m referring to items such as javascript date pickers, tooltips, autocomplete inputs, etc.  I&#39;m building on top of YUI for this approach, but the principles I&#39;d like to discuss are applicable to any library.  YUI provides a fantastic javascript library, and a collection of widgets right out of the box.  More than likely, as you add them to your application, you&#39;ll want to wrap or extend them in your own javascript implementations to get them functioning as desired.  To accomplish this, I typically have taken one of two approaches, and these are the topics I&#39;d like to cover.  To provide a working example, I&#39;ll use a simple wrapper for a YUI Calendar widget that is linked to a text input, and opens by clicking a calendar icon.

</p>
<p><img src="/images/datepicker.gif" alt="image of a date picker widget">

</p>
<h1>Prototype approach</h1>
<p>This approach basically creates an instance of the javascript widget for each input field, and the javascript widget object utilizes the prototype definition so the internal functions can be defined once in memory.  Below is an example of what a simple DatePicker widget that &quot;wraps&quot; the YUI Calendar widget, would look like:

</p>
<pre><code class="lang-javascript"><span class="keyword">function</span> DatePicker(icon, field) {
    <span class="keyword">this</span>.icon = icon;
    <span class="keyword">this</span>.field = field;
    YAHOO.util.Event.addListener(window, <span class="string">'load'</span>, <span class="keyword">this</span>.initialize, <span class="keyword">this</span>, <span class="keyword">true</span>);
}
DatePicker.prototype = {

    icon : <span class="keyword">null</span>,

    field : <span class="keyword">null</span>,

    calendar : <span class="keyword">null</span>,

    id : <span class="string">'date-calendar'</span>,

    container : <span class="keyword">null</span>,

    initialize : <span class="keyword">function</span>() {
        YAHOO.util.Event.addListener(<span class="keyword">this</span>.icon, <span class="string">'click'</span>, <span class="keyword">this</span>.click, <span class="keyword">this</span>, <span class="keyword">true</span>);
        <span class="keyword">this</span>.renderContainer();
    },

    renderContainer : <span class="keyword">function</span>() {
        <span class="keyword">this</span>.container = document.createElement(<span class="string">'div'</span>);
        <span class="keyword">this</span>.container.style.display = <span class="string">'none'</span>;
        document.body.appendChild(<span class="keyword">this</span>.container);
    },

    click : <span class="keyword">function</span>(e) {
        <span class="keyword">if</span>(<span class="keyword">this</span>.calendar === <span class="keyword">null</span>) {
            <span class="keyword">this</span>.renderCalendar();
        }
        <span class="keyword">this</span>.calendar.show();
        <span class="keyword">this</span>.positionCalendar();
    },

    renderCalendar : <span class="keyword">function</span>() {
        <span class="keyword">this</span>.calendar = <span class="keyword">new</span> YAHOO.widget.Calendar(<span class="keyword">this</span>.field+<span class="string">'-calendar'</span>, <span class="keyword">this</span>.container, { title:<span class="string">'Choose a date:'</span>, close:<span class="keyword">true</span>, navigator: <span class="keyword">true</span> } );
        <span class="keyword">this</span>.calendar.selectEvent.subscribe(<span class="keyword">this</span>.populateDateField, <span class="keyword">this</span>, <span class="keyword">true</span>);
        <span class="keyword">this</span>.calendar.render();
    },

    positionCalendar : <span class="keyword">function</span>() {
        <span class="keyword">var</span> position = YAHOO.util.Dom.getXY(<span class="keyword">this</span>.field);
        position[<span class="number">1</span>] = position[<span class="number">1</span>] + <span class="number">25</span>;
        YAHOO.util.Dom.setXY(<span class="keyword">this</span>.container, position);
    },

    populateDateField : <span class="keyword">function</span>() {
        <span class="keyword">var</span> date = <span class="keyword">this</span>.calendar.getSelectedDates()[<span class="number">0</span>];
        YAHOO.util.Dom.get(<span class="keyword">this</span>.field).value = date.getMonth() + <span class="string">'/'</span> + date.getDate() + <span class="string">'/'</span> + date.getFullYear();
        <span class="keyword">this</span>.calendar.hide();
    },

    hide : <span class="keyword">function</span>() {
        <span class="keyword">if</span>(<span class="keyword">this</span>.calendar !== <span class="keyword">null</span>) {
            <span class="keyword">this</span>.calendar.hide();
        }
    }

};</code></pre>
<p>The html for creating this widget is as simple as follows:

</p>
<pre><code class="lang-html">&lt;script type=<span class="string">"text/javascript"</span>>
    <span class="keyword">new</span> DatePicker(<span class="string">'date-icon'</span>, <span class="string">'date-field'</span>);
&lt;/script>
&lt;label>Date: &lt;/label>
&lt;input type=<span class="string">"text"</span> name=<span class="string">"date-field"</span> id=<span class="string">"date-field"</span> />
&lt;img src=<span class="string">"images/calendar.png"</span> id=<span class="string">"date-icon"</span> /></code></pre>
<p>Some benefits to this approach are that the instance of the widget object has a direct reference to the input id and calendar icon id, and nothing has to be &#39;inspected&#39; at runtime execution of the events.  This leads to some cleaner code on a small level.  It also has some downsides as we&#39;ll discuss below.

</p>
<h1>Singleton approach</h1>
<p>The Singleton approach creates a &#39;singleton&#39; wrapper object that creates <strong>ONE</strong> YUI Calendar widget that is re-used across all input fields.  At runtime, the icon clicked on is used to determine which input field is in use through an extra attribute added to the icon image called &#39;data-field&#39; that contains the id of the input it is linked to.  This code would look as follows:

</p>
<pre><code class="lang-javascript">DatePickerSingleton = {

    calendar : <span class="keyword">null</span>,

    id : <span class="string">'date-calendar'</span>,

    container : <span class="string">'date-calendar-container'</span>,

    activeInput : <span class="keyword">null</span>,

    initialize : <span class="keyword">function</span>() {
        <span class="keyword">var</span> icons = YAHOO.util.Selector.query(<span class="string">'.date-icon'</span>);
        YAHOO.util.Event.addListener(icons, <span class="string">'click'</span>, <span class="keyword">this</span>.click, <span class="keyword">this</span>, <span class="keyword">true</span>);
        <span class="keyword">this</span>.renderContainer();
    },

    renderContainer : <span class="keyword">function</span>() {
        <span class="keyword">var</span> container = document.createElement(<span class="string">'div'</span>);
        container.id = <span class="keyword">this</span>.container;
        container.style.display = <span class="string">'none'</span>;
        document.body.appendChild(container);
    },

    click : <span class="keyword">function</span>(e) {
        <span class="keyword">this</span>.activeInput = common.byEvent(e).getAttribute(<span class="string">'data-field'</span>);
        <span class="keyword">if</span>(<span class="keyword">this</span>.calendar === <span class="keyword">null</span>) {
            <span class="keyword">this</span>.renderCalendar();
        }
        <span class="keyword">this</span>.calendar.show();
        <span class="keyword">this</span>.positionCalendar();
    },

    renderCalendar : <span class="keyword">function</span>() {
        <span class="keyword">this</span>.calendar = <span class="keyword">new</span> YAHOO.widget.Calendar(<span class="keyword">this</span>.id, <span class="keyword">this</span>.container, { title:<span class="string">'Choose a date:'</span>, close:<span class="keyword">true</span>, navigator: <span class="keyword">true</span> } );
        <span class="keyword">this</span>.calendar.selectEvent.subscribe(<span class="keyword">this</span>.populateDateField, <span class="keyword">this</span>, <span class="keyword">true</span>);
        <span class="keyword">this</span>.calendar.render();
    },

    positionCalendar : <span class="keyword">function</span>() {
        <span class="keyword">var</span> position = YAHOO.util.Dom.getXY(YAHOO.util.Dom.get(<span class="keyword">this</span>.activeInput));
        position[<span class="number">1</span>] = position[<span class="number">1</span>] + <span class="number">25</span>;
        YAHOO.util.Dom.setXY(<span class="keyword">this</span>.container, position);
    },

    populateDateField : <span class="keyword">function</span>() {
        <span class="keyword">var</span> date = <span class="keyword">this</span>.calendar.getSelectedDates()[<span class="number">0</span>];
        YAHOO.util.Dom.get(<span class="keyword">this</span>.activeInput).value = date.getMonth() + <span class="string">'/'</span> + date.getDate() + <span class="string">'/'</span> + date.getFullYear();
        <span class="keyword">this</span>.calendar.hide();
    },

    hide : <span class="keyword">function</span>() {
        <span class="keyword">if</span>(<span class="keyword">this</span>.calendar !== <span class="keyword">null</span>) {
            <span class="keyword">this</span>.calendar.hide();
        }
    }

};
YAHOO.util.Event.addListener(window, <span class="string">'load'</span>, DatePickerSingleton.initialize, DatePickerSingleton, <span class="keyword">true</span>);</code></pre>
<p>The html for creating this widget is as simple as follows:

</p>
<pre><code class="lang-html">&lt;div <span class="keyword">class</span>=<span class="string">"code-highlight"</span>>&lt;code>
&lt;label>Date: &lt;/label>
&lt;input type=<span class="string">"text"</span> id=<span class="string">"date_field"</span> />
&lt;img src=<span class="string">"images/calendar.png"</span> <span class="keyword">class</span>=<span class="string">"date-icon"</span> data-field=<span class="string">"date_field"</span> /></code></pre>
<h1>Results</h1>
<p>After testing out each of these approaches using a range from 1 to 1000 inputs on a page, I noticed some interesting side effects.  Both approaches load using almost the same amount of resources.  You might think the Prototype approach would require more memory on page load to create each of the widgets for each input, but in reality, due to the prototype definition, the only additional memory needed for each widget is for the unique element id&#39;s stored as attributes.  Each approach also uses a &#39;lazy loading&#39; approach, that causes the Calendar widget to not be created until the user actually clicks on an icon.  This is where the two approaches begin to differ.

</p>
<p>The Singleton approach consumes a small amount of additional memory on the first click, as it creates the Calendar widget at this time.  For subsequent clicks the memory stays the same, as the objects have already been created, and are just being re-used.  A downside to this approach is that on page load, a javascript css selector query has to be executed to gather all date picker icons to set up click events for them.  This &#39;can&#39; be time consuming with a large number of elements (1000+).

</p>
<p>The Prototype approach will consume additional memory for each new icon that is clicked, as there is a Calendar widget created lazily for each input at the runtime click event of the icon.  From my simple tests, I saw an increase ranging from 51.2 kb to 358.4 kb for each additional widget instantiated (each new icon clicked).  In contrast to the Singleton approach, on page load there is no css selector query to run in order to attach the click events, as the element ids are already in memory from the instantiation of each &#39;wrapper&#39; (DatePicker) object.  This saves the possibly heavy css based query, but adds an initialize function for each input to the page load, which can be time consuming as well.

</p>
<p>Recently I have been using the Singleton approach for creating widgets where it is possible, as I believe it scales better, and avoids the problem of memory increasing as users go about using the application.  This can be accentuated even further when page life cycle is long such as in the case of single page web applications.  I found this little exercise interesting in my own work, and hope it is informative for some other people out there.  I&#39;d love to hear any comments regarding this from everyone out there.

</p>

</div></article><article><h2><a href="/2008/08/20/javascript-getfirstdescendantby">Javascript getFirstDescendantBy()</a></h2><div class="meta"><ul class="tags"><li><a href="/tag/javascript">javascript</a></li><li><a href="/tag/yui">yui</a></li></ul><img src="http://www.gravatar.com/avatar/c20763ec853bb1d2eb3e8a08cc5a28b9?s=30.jpg" width="30" height="30"><div class="date">Wednesday August 20, 2008</div><div class="name">By Brad Harris</div></div><div class="content"><hr>
<blockquote>
<p>   Update: <a href="/2009/01/22/followup-on-yui-getfirstdescendantby/">A new native YUI function is in the works, and does this job better</a>

</p>
</blockquote>
<hr>
<p>Recently I was working on optimizing some javascript, and found a slow area that was trying to find the first focusable input in a certain area of the page, and it was taking anywhere from 100 - 500 milliseconds, depending on the size of the DOM tree in that element.  After digging into it, I noticed it was using the <code>YAHOO.util.dom.getElementsBy()</code> method, which basically had to walk through the whole DOM tree in this case, testing each node against the boolean method passed in.  After calling that, it would then return the first, if any, element that getElementsBy returned.  Obviously this was a bad approach, as after you find the first match, there is no need to go further.

</p>
<p>I did a little research, and saw that this had come up in <a href="http://tech.groups.yahoo.com/group/ydn-javascript/message/19684">a thread on the YUI group</a>.  I ended up writing a small method to fill in this functionality I wanted out of YUI, called <code>getFirstDescendantBy(rootEl, method)</code>.  The function takes a root element, or string id of that element, and then a function to test each element against that has the element being tested as the only input.  This function passed in should return a boolean, and is similar to the way the YUI dom function <code>getElementsBy()</code> works.  Hopefully this will help out some people in similar situations.

</p>
<pre><code class="lang-javascript"><span class="keyword">function</span> getFirstDescendantBy(rootEl, method) {
    <span class="keyword">var</span> root = typeof rootEl === <span class="string">'string'</span> ? document.getElementById(rootEl) : rootEl;
    <span class="keyword">var</span> firstDescendant = <span class="keyword">null</span>;
    <span class="keyword">var</span> children = root.childNodes;
    <span class="keyword">for</span>(<span class="keyword">var</span> idx in children) {
        <span class="keyword">var</span> child = children[idx];
        <span class="keyword">if</span>(child.nodeType === <span class="number">1</span>) {
            <span class="keyword">if</span>(method(child)) {
                firstDescendant = child;
                <span class="keyword">break</span>;
            }<span class="keyword">else</span> <span class="keyword">if</span>(child.childNodes.length > <span class="number">0</span>) {
                <span class="keyword">var</span> recursiveResult = getFirstDescendantBy(child, method);
                <span class="keyword">if</span>(recursiveResult !== <span class="keyword">null</span>) {
                    firstDescendant = recursiveResult;
                    <span class="keyword">break</span>;
                }
            }
        }
    }
    <span class="keyword">return</span> firstDescendant;
}</code></pre>

</div></article><article><h2><a href="/2008/07/23/back-to-firefox-2">Back to Firefox 2</a></h2><div class="meta"><ul class="tags"><li><a href="/tag/javascript">javascript</a></li><li><a href="/tag/yui">yui</a></li></ul><img src="http://www.gravatar.com/avatar/c20763ec853bb1d2eb3e8a08cc5a28b9?s=30.jpg" width="30" height="30"><div class="date">Wednesday July 23, 2008</div><div class="name">By Brad Harris</div></div><div class="content"><p>If you&#39;re like me, you use <a href="https://addons.mozilla.org/en-US/firefox/addon/1843">Firebug</a> a lot, like, all day long.  Long gone are the days of resorting to alerts.  The worst I&#39;ll fall back to is using the YUI logger for IE.

</p>
<p>I&#39;ve recently been having a lot of issues using Firefox 3, and Firebug.  Firefox 3 has been pretty consistent at crashing a few times throughout the day.  Firebug 1.2 has recently been causing me more and more troubles, to the point where I can&#39;t get it to not stop at breakpoints that I&#39;ve removed, or it stops at my breakpoint, but doesn&#39;t let me play it through or debug, or remove the breakpoint, because it doesn&#39;t show up as being registered.

</p>
<p>I&#39;m sure these are hiccups with the new version of Firefox 3, but it is pretty disruptive to me as I&#39;m developing.  I reverted back to Firefox 2 and an older version of Firebug until they get this sorted out, which I&#39;m sure will be soon.  For anyone looking, you can find old versions of Firefox on <a href="http://www.filehippo.com/download_firefox/4403/">FileHippo</a>, and past versions of Firebug from the normal download site.

</p>

</div></article><article><h2><a href="/2008/07/16/complex-javascript-event-handling-eventmediator">Complex Javascript Event Handling: EventMediator</a></h2><div class="meta"><ul class="tags"><li><a href="/tag/javascript">javascript</a></li><li><a href="/tag/yui">yui</a></li></ul><img src="http://www.gravatar.com/avatar/c20763ec853bb1d2eb3e8a08cc5a28b9?s=30.jpg" width="30" height="30"><div class="date">Wednesday July 16, 2008</div><div class="name">By Brad Harris</div></div><div class="content"><p>A large enterprise sized project I work on uses YUI library extensively, and events are a huge part of the rich front end we&#39;re developing.  What you start to learn quickly about UI events, is that dependencies between different events start to get very complicated very fast.  When A depends on B, but B needs to wait for C and D and E to finish, but E needs to wait for F to finish, you have a complex situation on your hands.  Up until recently we were able to rely mostly on just using CustomEvents in YUI to handle this for us.

</p>
<p>Where that starts to break down is when you have one event, <strong>A</strong>, that is dependent on multiple other events, <strong>B, C, D</strong>.  You now have to manually keep track of what has fired, and make sure you don&#39;t fire that <strong>A</strong> until <strong>B, C and D</strong> have all fired.  With very little code, here is a simple class that can be used in conjunction with YIU CustomEvents.  It will handle the &#39;book-keeping&#39; of firing what you want when all the events you have designated fire.

</p>
<pre><code class="lang-javascript">EventMediator = {

    addActivationRecord : <span class="keyword">function</span>(record) {
        record = record || {};
        <span class="keyword">var</span> that = <span class="keyword">this</span>;
        <span class="keyword">for</span>(<span class="keyword">var</span> idx in record.events) {
            <span class="keyword">var</span> eventRecord = record.events[idx];
            <span class="keyword">if</span>(eventRecord.event !== <span class="keyword">null</span>) {
                eventRecord.fired = <span class="keyword">false</span>;
                eventRecord.event.subscribe(<span class="keyword">function</span>(scopedEvent) {
                    <span class="keyword">return</span> <span class="keyword">function</span>(e) {
                        scopedEvent.fired = <span class="keyword">true</span>;
                        that.fireActivation(record);
                    }
                }(eventRecord));
            }
        }
    },

    fireActivation : <span class="keyword">function</span>(record) {
        <span class="keyword">var</span> fired = <span class="keyword">true</span>;
        <span class="keyword">for</span>(<span class="keyword">var</span> idx in record.events) {
            <span class="keyword">if</span>(record.events[idx].fired === <span class="keyword">false</span>) {
                fired = <span class="keyword">false</span>;
                <span class="keyword">break</span>;
            }
        }
        <span class="keyword">if</span>(fired === <span class="keyword">true</span>) {
            record.activate.call(record.scope);
        }
    }

};</code></pre>
<p>Using the EventMediator would look something like the following:

</p>
<pre><code class="lang-javascript">EventMediator.addActivationRecord({
    events : [
        { event : myObj.someYUICusomEvent },
        { event : myObj.anotherYUICusomEvent }
    ],
    activate : myObj1.myActivationCallback,
    scope : myObj1
});</code></pre>
<p>It&#39;s pretty straightforward I think.  You call <code>addActivationRecord</code>, passing in an array of objects, whose &#39;event&#39; property points to a YUI CustomEvent.  You also provide an <em>activate</em> callback method, and give it a scope in which to call the method.  For my purposes so far this has worked pretty well, although I&#39;m sure it could be built up to be much more robust.  Hope it helps someone out!
</p>

</div></article></section></div><footer>	&copy; 2012 Brad Harris |
	powered by
<a href="https://github.com/selfcontained/flipflop">flipflop</a></footer></div><script type="text/javascript">var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-254292-12']);
_gaq.push(['_trackPageview']);

(function() {
 var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
 ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
 var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script></body></html>